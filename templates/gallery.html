{% if not append %}
<div id="gallery-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
{% endif %}
    {% for img in images %}
    <a href="/photos/{{ img.relative_path }}"
       class="block aspect-square overflow-hidden rounded-lg bg-slate-200 hover:ring-2 hover:ring-blue-500 transition-all"
       onclick="event.preventDefault(); openModal('/photos/{{ img.relative_path }}', {{ loop.index0 }}, [{% for i in images %}'/photos/{{ i.relative_path }}'{% if not loop.last %},{% endif %}{% endfor %}]);">
        <img src="/cache/{{ img.relative_path|cache_key }}"
             alt="{{ img.filename }}"
             class="w-full h-full object-cover"
             loading="lazy">
    </a>
    {% endfor %}
{% if has_next %}
<div hx-get="/gallery?path={{ path }}&search={{ search }}&page={{ page + 1 }}"
     hx-trigger="revealed"
     hx-swap="beforeend"
     hx-target="#gallery-grid">
</div>
{% endif %}
{% if not append %}
</div>
{% endif %}
